<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>alkhas AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0b0f14;
  color: #e5e7eb;
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

header {
  padding: 15px;
  text-align: center;
  background: #020617;
  font-size: 20px;
  font-weight: bold;
  box-shadow: 0 0 15px #00ff99;
}

#chat {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
}

.msg {
  max-width: 80%;
  padding: 12px 15px;
  margin-bottom: 10px;
  border-radius: 15px;
  line-height: 1.4;
}

.user {
  background: #00ff99;
  color: #000;
  margin-left: auto;
}

.ai {
  background: #020617;
  border: 1px solid #00ff99;
}

img.generated {
  max-width: 100%;
  border-radius: 12px;
  margin-top: 10px;
  box-shadow: 0 0 15px #00ff99;
}

footer {
  display: flex;
  padding: 10px;
  background: #020617;
  gap: 5px;
}

input {
  flex: 1;
  padding: 12px;
  border-radius: 20px;
  border: none;
  outline: none;
}

button {
  padding: 12px 16px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background: #00ff99;
  color: #000;
  font-weight: bold;
}
</style>
</head>

<body>

<header>alkhas AI — free neural network</header>

<div id="chat"></div>

<footer>
  <input id="prompt" placeholder="Напиши запрос..." />
  <button onclick="sendText()">Текст</button>
  <button onclick="sendImage()">Картинка</button>
</footer>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("prompt");

// ⬇ МОЖНО ОСТАВИТЬ ПУСТЫМ (работает бесплатно, если HF доступен)
const HF_TOKEN = ""; 

function addMessage(text, cls) {
  const div = document.createElement("div");
  div.className = "msg " + cls;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function sendText() {
  const text = input.value.trim();
  if (!text) return;
  input.value = "";

  addMessage(text, "user");
  addMessage("Думаю...", "ai");

  const res = await fetch(
    "https://api-inference.huggingface.co/models/gpt2",
    {
      method: "POST",
      headers: {
        "Authorization": HF_TOKEN ? "Bearer " + HF_TOKEN : undefined,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ inputs: text })
    }
  );

  const data = await res.json();
  chat.lastChild.remove();

  addMessage(
    data[0]?.generated_text || "Ошибка генерации",
    "ai"
  );
}

async function sendImage() {
  const text = input.value.trim();
  if (!text) return;
  input.value = "";

  addMessage(text, "user");
  addMessage("Генерирую изображение...", "ai");

  const res = await fetch(
    "https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-2",
    {
      method: "POST",
      headers: {
        "Authorization": HF_TOKEN ? "Bearer " + HF_TOKEN : undefined,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ inputs: text })
    }
  );

  const blob = await res.blob();
  chat.lastChild.remove();

  const img = document.createElement("img");
  img.src = URL.createObjectURL(blob);
  img.className = "generated";
  chat.appendChild(img);
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
